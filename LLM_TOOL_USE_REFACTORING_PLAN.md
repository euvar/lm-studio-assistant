# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ LLM Tool Use

## –¶–µ–ª—å
–ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞ —Å–∏—Å—Ç–µ–º—É tool use –¥–ª—è LLM, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç:
- –£–±—Ä–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ –∫–æ–¥–∞
- –°–¥–µ–ª–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ —Ä–∞–±–æ—Ç–µ —Å LLM (function calling)
- –£–ª—É—á—à–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞
–°–µ–π—á–∞—Å –≤ –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π:
```typescript
const searchPatterns = [
  /–Ω–∞–π–¥–∏|–Ω–∞–π—Ç–∏|–ø–æ–∏—â–∏|–ø–æ–∏—Å–∫–∞—Ç—å|search|find|look up/,
  /–ø–æ–≥–æ–¥–∞|weather/,
  // –∏ —Ç.–¥.
];
```

## –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥: LLM Tool Definitions

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Tool Definition
```typescript
interface ToolDefinition {
  name: string;
  description: string;
  parameters: {
    type: 'object';
    properties: Record<string, {
      type: string;
      description: string;
      enum?: string[];
      required?: boolean;
    }>;
    required?: string[];
  };
}
```

### 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã Tool Registry
```typescript
// src/core/tool-registry.ts
class ToolRegistry {
  private tools: Map<string, ToolDefinition> = new Map();
  
  register(tool: ToolDefinition): void;
  getTools(): ToolDefinition[];
  getTool(name: string): ToolDefinition | undefined;
}
```

#### 2.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM Provider
```typescript
// src/core/llm-tool-caller.ts
class LLMToolCaller {
  async determineToolCall(
    userInput: string,
    availableTools: ToolDefinition[],
    context?: any
  ): Promise<ToolCall[]>;
}
```

#### 2.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
–í–º–µ—Å—Ç–æ canHandle() —Å —Ä–µ–≥—É–ª—è—Ä–∫–∞–º–∏, –∞–≥–µ–Ω—Ç—ã –±—É–¥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
```typescript
class SearchAgent extends BaseAgent {
  getToolDefinitions(): ToolDefinition[] {
    return [{
      name: 'web_search',
      description: '–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ',
      parameters: {
        type: 'object',
        properties: {
          query: {
            type: 'string',
            description: '–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å'
          }
        },
        required: ['query']
      }
    }];
  }
}
```

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
1. **–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã** (`src/types/tool-definitions.ts`)
   - ToolDefinition
   - ToolCall
   - ToolResult
   
2. **–°–æ–∑–¥–∞—Ç—å ToolRegistry** (`src/core/tool-registry.ts`)
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
   
3. **–°–æ–∑–¥–∞—Ç—å LLMToolCaller** (`src/core/llm-tool-caller.ts`)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LM Studio API
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö tool calls –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –≠—Ç–∞–ø 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç–æ–≤
1. **BaseAgent** - –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ getToolDefinitions()
2. **SearchAgent** - –∑–∞–º–µ–Ω–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞ tool definitions
3. **FileAgent** - –∑–∞–º–µ–Ω–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞ tool definitions
4. **CodeAgent** - –∑–∞–º–µ–Ω–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞ tool definitions
5. **–û—Å—Ç–∞–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã** - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Orchestrator
1. –°–æ–±–∏—Ä–∞—Ç—å –≤—Å–µ tool definitions –æ—Ç –∞–≥–µ–Ω—Ç–æ–≤
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLMToolCaller –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–∑–≤–∞—Ç—å
3. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∞–≥–µ–Ω—Ç–∞–º

### –≠—Ç–∞–ø 4: –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è LLM:

**–ë—ã–ª–æ:**
```typescript
/–Ω–∞–π–¥–∏|–Ω–∞–π—Ç–∏|–ø–æ–∏—â–∏|–ø–æ–∏—Å–∫–∞—Ç—å|search|find|look up/
```

**–°—Ç–∞–ª–æ:**
```typescript
{
  name: 'web_search',
  description: '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –Ω–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫, —É–∑–Ω–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: –Ω–∞–π–¥–∏, –ø–æ–∏—â–∏, search, find, look up, –ø–æ–≥–æ–¥–∞, –∫—É—Ä—Å, –Ω–æ–≤–æ—Å—Ç–∏',
  parameters: {...}
}
```

### –≠—Ç–∞–ø 5: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
1. –ó–∞–≥—Ä—É–∑–∫–∞ tool definitions –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
2. **–¢–æ—á–Ω–æ—Å—Ç—å** - LLM –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, —á–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
3. **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
4. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º (OpenAI, Anthropic)
5. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

## –ü—Ä–∏–º–µ—Ä—ã tool definitions –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤

### SearchAgent
```typescript
[{
  name: 'web_search',
  description: '–ü–æ–∏—Å–∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ',
  parameters: {
    type: 'object',
    properties: {
      query: {
        type: 'string',
        description: '–ß—Ç–æ –∏—Å–∫–∞—Ç—å'
      }
    }
  }
}]
```

### FileAgent
```typescript
[{
  name: 'list_files',
  description: '–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏',
  parameters: {
    type: 'object',
    properties: {
      path: {
        type: 'string',
        description: '–ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏'
      }
    }
  }
}, {
  name: 'read_file',
  description: '–ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞',
  parameters: {
    type: 'object',
    properties: {
      path: {
        type: 'string',
        description: '–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É'
      }
    }
  }
}, {
  name: 'write_file',
  description: '–ó–∞–ø–∏—Å–∞—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª',
  parameters: {
    type: 'object',
    properties: {
      path: {
        type: 'string',
        description: '–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É'
      },
      content: {
        type: 'string',
        description: '–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞'
      }
    }
  }
}]
```

### CodeAgent
```typescript
[{
  name: 'run_code',
  description: '–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è',
  parameters: {
    type: 'object',
    properties: {
      language: {
        type: 'string',
        enum: ['javascript', 'typescript', 'python', 'bash'],
        description: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è'
      },
      code: {
        type: 'string',
        description: '–ö–æ–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è'
      }
    }
  }
}, {
  name: 'create_project',
  description: '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç',
  parameters: {
    type: 'object',
    properties: {
      name: {
        type: 'string',
        description: '–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞'
      },
      type: {
        type: 'string',
        enum: ['node', 'react', 'python', 'express'],
        description: '–¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞'
      }
    }
  }
}]
```

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. ‚úÖ –ò–∑—É—á–∏—Ç—å best practices –¥–ª—è tool use
2. üìù –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
3. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ToolRegistry
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å LLMToolCaller
6. –û–±–Ω–æ–≤–∏—Ç—å BaseAgent
7. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å SearchAgent
8. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å FileAgent
9. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å CodeAgent
10. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
11. –û–±–Ω–æ–≤–∏—Ç—å OrchestratorAgent
12. –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
13. –ù–∞–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- –í—Å–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ –∫–æ–¥–∞
- –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç tool definitions –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- LLM –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–∑–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏–π
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å